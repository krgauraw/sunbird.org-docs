<!DOCTYPE html>
<html>
	<head>
	<base id="baseURL" href="/4.5.0/" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=10, user-scalable=yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes" />
<link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
<meta name="msapplication-TileColor" content="#65d3f7">
<meta name="msapplication-TileImage" content="/img/favicon/mstile-150x150.png">

<title>Build and Deploy</title>
<meta name="description" content="Build and Deploy"/>

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="last-modified" content="2022-01-25 13:06:31 +0530">
<meta http-equiv="Expires" content="600" />

<!--Build Details-->
<meta name="buildVersion" content="" />
<meta name="buildNo" content="4075" />
<meta name="version" id="docsVersion" content="4.5.0" />
<!--/Build Details-->


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,600,700" >
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?25012022"  />

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js?25012022"></script>
<script type="text/javascript" src="/js/jquery.tocLight.js?25012022"></script>
<script type="text/javascript" src="/js/jquery.elevateZoom-3.0.8.min.js?25012022"></script>
<script type="text/javascript" src="/js/handlebars-v4.0.11.js?25012022"></script>
<script type="text/javascript" src="/js/widgets-data.js?25012022"></script>
<script type="text/javascript" src="/js/widgets.js?25012022"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106552125-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-106552125-1');
</script>
<script>
function resetBase(){
	currentURLArray = window.location.pathname.split( '/' );
    secondLevelLocation = currentURLArray[1];
    if (secondLevelLocation == 'latest'){
		baseURL = document.getElementById('baseURL');
		baseURL.href="/latest/";
	}
}
resetBase();
</script>

	
		<meta name="robots" content="index, follow">
	
  </head>
  <body id="body" class="doc-layout">
  <div class="container inner container-height docs">
    <header class="logo-container">
      <div class="logo">
        <a href="https://www.sunbird.org" target="_blank">
          <img src="/img/sunbird-logo.png" alt="Sunbird" title="Sunbird">
        </a>
      </div>
      <button type="button" class="dropdown-toggle collapsed" id="dropdown-trigger" data-toggle="collapse" data-target="#mobile-dropdown" aria-expanded="false">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </header>
    <nav class="sidebar-container" id="mobile-dropdown">
      <div class="inner__sidebar">
        

<div id="" class="sidebar-cover">
	
	 <div class="search-cover">
	<form method="get" action="https://www.google.com/search" target="_blank">
		<input type="text" value="" name="q" placeholder="Search"/ class="search-input" title="Enter keyword to search">
		<input type="hidden" value="en" name="hl" />
		<input type="hidden" name="sitesearch" value="http://docs.sunbird.org" />
		<input type="hidden" value="lang_en" name="lr" />
		<button type="submit" onclick="submit()" class="search-btn" title="Search">
			<i class="fa fa-search"></i>
		</button>
	</form>
</div>
 
	<div id="widgetVersionSwitcher"></div>
	
	<div class="sidebar-wrapper developer-docs"> 
		
			
				
				
				<div class="active">
					<a href="developer-docs/" >
						<h4 class="sidebar-group-title">Developer Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-installation/" 
										 
										class="" 
										> 
										Server Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-installation/prerequisites/" 
												
												class="" 
												>
												Pre-Requisites
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/load-balancer-setup/" 
												
												class="" 
												>
												Optional Load Balancer Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/ansible-variables/" 
												
												class="" 
												>
												Ansible Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-setup/" 
												
												class="" 
												>
												Jenkins Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/build-and-deploy/" 
												
												class="" 
												>
												Build and Deploy
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								
								<a 
									href="developer-docs/upgrade/" 
									
									class="" 
									>
									Upgrading Sunbird
								</a>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/application-configurations/" 
										 
										class="" 
										> 
										Application Configurations
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/env_variables_portal/" 
												
												class="" 
												>
												Portal Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/env_variables_content_service/" 
												
												class="" 
												>
												Content Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/application-configurations/configuring_domain_ext_links/" 
															
															class="" 
															>
															Import External Content
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/application-configurations/content_filtering/" 
															
															class="" 
															>
															Content Filtering
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/system_settings/" 
												
												class="" 
												>
												System Settings
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/configuring_email_notification/" 
												
												class="" 
												>
												Email Notification Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/content_checklist_configuration/" 
												
												class="" 
												>
												Reviewer Checklist
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/metadata_driven_forms/" 
												
												class="" 
												>
												Metaforms Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/application-configurations/env_variables_lms/" 
												
												class="" 
												>
												LMS Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/application-configurations/sso_otpsms/" 
															
															class="" 
															>
															OTP based SMS Configuration
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/application-configurations/keycloak_admin_config_settings/" 
															
															class="" 
															>
															Keycloak Admin Configuration
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/developer-installation/" 
										 
										class="" 
										> 
										Developer Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/developer-installation/install_sbportal" 
												
												class="" 
												>
												Portal
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/mobile-app-installation/" 
										 
										class="" 
										> 
										Mobile App Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/mobile-app-installation/mobile_app_forms" 
												
												class="" 
												>
												Mobile App forms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/onboarding/" 
										 
										class="" 
										> 
										Onboarding
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/singlesignon/org_user_creation_sso/" 
												
												class="" 
												>
												Creating Organizations and Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/configuring_sunbird/configuring_announcement/" 
												
												class="" 
												>
												Creating Announcements
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/how-to-guide/overview_howto/" 
										 
										class="" 
										> 
										How-To-Guides
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_framework_in_sunbird/" 
												
												class="" 
												>
												Creating Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_seeddata_in_framework/" 
												
												class="" 
												>
												Adding Content to Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_organization/" 
												
												class="" 
												>
												Creating Organizations
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_user/" 
												
												class="" 
												>
												Creating Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_org_add_user/" 
												
												class="" 
												>
												Adding User to Organization
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_course_using_api/" 
												
												class="" 
												>
												Creating Course
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_upload_existing_content/" 
												
												class="" 
												>
												Uploading Content
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_badge/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/metadata_driven_forms" 
												
												class="" 
												>
												Configuring Metaforms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/link_dial_code_to_a_book" 
												
												class="" 
												>
												Linking DIAL Code
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/telemetry_data_consumption" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/telemetry/overview/" 
										 
										class="" 
										> 
										Telemetry
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/specification/" 
												
												class="" 
												>
												Telemetry Specifications
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/sending_telemetry/" 
												
												class="" 
												>
												Sending Telemetry
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/consuming_telemetry/" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#mobile-app-workflow" 
															
															class="" 
															>
															Mobile App Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#web-portal-workflow" 
															
															class="" 
															>
															Web Portal Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#content-editor-workflow" 
															
															class="" 
															>
															Content Editor Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#backend-services-workflow" 
															
															class="" 
															>
															Backend-services Workflow
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/library_reference/" 
										 
										class="" 
										> 
										Library References
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/jslibrary/" 
												
												class="" 
												>
												Standalone JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/htmlinterfacelibrary/" 
												
												class="" 
												>
												HTML Interface Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/authtokengenerator_jslibrary/" 
												
												class="" 
												>
												AuthToken Generator JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								
								<a 
									href="developer-docs/troubleshooting/" 
									
									class="" 
									>
									Troubleshooting
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="apis/" >
						<h4 class="sidebar-group-title">API Reference Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="apis/#contribution--curation" 
									
									class="" 
									>
									Contribution & Curation
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#taxonomy--tagging" 
									
									class="" 
									>
									Taxonomy & Tagging
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#discovery--personalisation" 
									
									class="" 
									>
									Discovery & Personalization
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#interaction-and-collaboration" 
									
									class="" 
									>
									Interaction & Collaboration
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#learn-do-practice-sense--assess" 
									
									class="" 
									>
									Learn, Do, Practice, Sense & Assess
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#credentialing--badging" 
									
									class="" 
									>
									Credentialing & Badging
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#open-data" 
									
									class="" 
									>
									Open Data
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#learning-infra-telemetry--analytics" 
									
									class="" 
									>
									Learning Infra, Telemetry & Analytics
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="faqs/" >
						<h4 class="sidebar-group-title">Frequently asked questions</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="faqs/audience/" 
									
									class="" 
									>
									Audience
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_format/" 
									
									class="" 
									>
									Content Format
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_repo/" 
									
									class="" 
									>
									Content Repositories
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/contentreviews/" 
									
									class="" 
									>
									Content Review
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_types/" 
									
									class="" 
									>
									Content Types
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_upload/" 
									
									class="" 
									>
									Content Upload
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/feature/" 
									
									class="" 
									>
									Features
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/fixerrors/" 
									
									class="" 
									>
									Fix Errors
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/helpsupport/" 
									
									class="" 
									>
									Help Support
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/intellectual_propertylicensesstandards/" 
									
									class="" 
									>
									Intellectual Property Licenses Standards
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/registrationenrolment/" 
									
									class="" 
									>
									Registration and Enrollment
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/signin/" 
									
									class="" 
									>
									Sign In
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/taxonomymetadataframework/" 
									
									class="" 
									>
									Taxonomy Metadata Framework
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/user_rightspermissions/" 
									
									class="" 
									>
									Users Rights and Permission
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="glossary/" >
						<h4 class="sidebar-group-title">Glossary</h4>
					</a>
					
				</div>
				
		
	</div>
</div>

<script>
	$("a[href$='developer-docs/upgrade/']").addClass("sidebar-link-selected");
</script>

      </div>
    </nav>
    <div class="content">
      <div class="inner__content header" id="heading">
        <h1>Build and Deploy </h1>
      </div>

      <div id="main-content" class="inner__content">
			<p class="edit-para text-right">
				<span>
			<!--<a target="_blank" class="contribute" href="/contributions/contribution_guidelines/">
				  <i class="fa fa-book" aria-hidden="true"></i> <i>Contribution Guidelines</i>
			  </a> &nbsp;&nbsp;-->
			  
			 <a target="_blank"  title="Edit this page"class="" href="https://github.com/project-sunbird/sunbird.org-docs/edit/4.5.0/developer-docs/upgrade/index.md">
				  <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit
			  </a> 
			  | 
			  <a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
				  Report
			  </a>
			  </span>
			</p>
			<div class="widgetLatestVersionNotification"></div>
          <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
            <span class="toctoggle">[<a id="toctogglelink" class="internal" href="#">hide</a>]</span>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#overview"><span class="tocnumber">1 .</span> <span class="toctext">Overview</span></a>
              <ul>
                <li class="toc_level-2 toc_section-2">
                  <a href="#variables-for-sunbird"><span class="tocnumber">1.1 .</span> <span class="toctext">Variables for Sunbird</span></a>
                </li>
                <li class="toc_level-2 toc_section-3">
                  <a href="#build-and-deploy-for-sunbird"><span class="tocnumber">1.2 .</span> <span class="toctext">Build and Deploy for Sunbird</span></a>
                </li>
                <li class="toc_level-2 toc_section-4">
                  <a href="#manual-configurations-for-sunbird"><span class="tocnumber">1.3 .</span> <span class="toctext">Manual Configurations for Sunbird</span></a>
                </li>
                <li class="toc_level-2 toc_section-5">
                  <a href="#variables-for-vidyadaan"><span class="tocnumber">1.4 .</span> <span class="toctext">Variables for Vidyadaan</span></a>
                </li>
                <li class="toc_level-2 toc_section-6">
                  <a href="#build-and-deploy-for-vidayadaan"><span class="tocnumber">1.5 .</span> <span class="toctext">Build and Deploy for Vidayadaan</span></a>
                </li>
                <li class="toc_level-2 toc_section-7">
                  <a href="#manual-configurations-for-vidyadaan"><span class="tocnumber">1.6 .</span> <span class="toctext">Manual Configurations for Vidyadaan</span></a>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h2 id="overview">Overview</h2>

<p>This page details out the jobs required to be run as part of the upgrade from Sunbird and Vidaydaan release 4.4.0 to release 4.5.0. Use the following table to understand the jobs that need to be executed in order to successfully complete the upgrade. Any jenkins job configuration or pre-requisites mentioned under manual configuration section needs to be done first before running any of the mentioned jobs. The order of the jobs should also be run as shown below. They can be run in parallel to speed up the execution.</p>

<h3 id="variables-for-sunbird">Variables for Sunbird</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Variable Name</th>
      <th style="text-align: center">Service Name</th>
      <th style="text-align: center">Default Public Value</th>
      <th style="text-align: center">Private Value Override</th>
      <th style="text-align: center">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">adminutil_embed_role</td>
      <td style="text-align: center">Adminutils</td>
      <td style="text-align: center">false</td>
      <td style="text-align: center">true</td>
      <td style="text-align: center">Embeds the user’s role in the token<br />Ensure to put the value in single quotes</td>
    </tr>
    <tr>
      <td style="text-align: center">New kong consumer</td>
      <td style="text-align: center">Admintils</td>
      <td style="text-align: center">NA</td>
      <td style="text-align: center">Add a new ansible dictionary with ACL as below<br />userAccess:<br />  - userAccess<br /><br />Add a new kong consumer to the kong_consumers dictionary as shown below<br />  - username: adminutil_learner_api_key<br />    groups: “{{ userAccess }}”<br />    state: present</td>
      <td style="text-align: center">To connect to learner service via kong, we are creating a new consumer</td>
    </tr>
    <tr>
      <td style="text-align: center">adminutil_learner_api_auth_key</td>
      <td style="text-align: center">Admintils</td>
      <td style="text-align: center">NA</td>
      <td style="text-align: center">Run the OnboardConsumers job and take the JWT token for the consumer adminutil_learner_api_key</td>
      <td style="text-align: center">To connect to learner service via kong, we are creating a new consumer</td>
    </tr>
    <tr>
      <td style="text-align: center">Add acls for desktop app</td>
      <td style="text-align: center">Desktop</td>
      <td style="text-align: center">NA</td>
      <td style="text-align: center">- readNotificationFeed<br />  - updateNotificationFeed<br />  - deleteNotificationFeed</td>
      <td style="text-align: center">To access notification service APIs from desktop app</td>
    </tr>
    <tr>
      <td style="text-align: center">Add new variables in Core/common.yml</td>
      <td style="text-align: center">PA</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"><code>kong_desktop_device_consumer_names_for_opa: '["desktop_devicev2", "desktop_device"]'</code></td>
      <td style="text-align: center">To disable checks for desktop app</td>
    </tr>
  </tbody>
</table>

<h3 id="build-and-deploy-for-sunbird">Build and Deploy for Sunbird</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Service to be Build</th>
      <th style="text-align: left">Build Tag</th>
      <th style="text-align: left">Service to Deploy</th>
      <th style="text-align: left">Deploy Tag</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Build/managed-learn/ml-core-service</td>
      <td style="text-align: left">release-4.5.0_RC8</td>
      <td style="text-align: left">Deploy/managed-learn/ml-core-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/managed-learn/ml-projects-service</td>
      <td style="text-align: left">release-4.5.0_RC7</td>
      <td style="text-align: left">Deploy/managed-learn/ml-projects-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Player</td>
      <td style="text-align: left">release-4.5.0_RC45</td>
      <td style="text-align: left">Deploy/Kubernetes/Player</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/KnowledgePlatform/FlinkJobs</td>
      <td style="text-align: left">release-4.5.0_RC42</td>
      <td style="text-align: left">Deploy/KnowledgePlatform/FlinkJobs</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/managed-learn/ml-reports-service</td>
      <td style="text-align: left">release-4.5.0_RC4</td>
      <td style="text-align: left">Deploy/managed-learn/ml-reports-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Notification</td>
      <td style="text-align: left">release-4.5.0_RC4</td>
      <td style="text-align: left">Deploy/Kubernetes/Notification</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Cassandra</td>
      <td style="text-align: left">release-4.5.0_RC4</td>
      <td style="text-align: left">Deploy/Kubernetes/Cassandra</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/DataPipeline/FlinkPipelineJobs</td>
      <td style="text-align: left">release-4.5.0_RC4</td>
      <td style="text-align: left">Deploy/DataPipeline/FlinkPipelineJobs</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/DataPipeline/EdDataProducts</td>
      <td style="text-align: left">release-4.5.0_RC4</td>
      <td style="text-align: left">Deploy/DataPipeline/EdDataProducts</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Taxonomy</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/Kubernetes/Taxonomy</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Search</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/Kubernetes/Search</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Content</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/Kubernetes/Content</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Assessment</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/Kubernetes/Assessment</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/AdminUtils</td>
      <td style="text-align: left">sunbird-apimanager-util: release-4.5.0_RC3</td>
      <td style="text-align: left">Deploy/Kubernetes/AdminUtils</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/DataPipeline/ETLUserCacheIndexer</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/DataPipeline/ETLUserCacheIndexer</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/DataPipeline/ETLJobs</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/DataPipeline/ETLJobs</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/DataPipeline/ETLDruidContentIndexer</td>
      <td style="text-align: left">release-4.5.0_RC2</td>
      <td style="text-align: left">Deploy/DataPipeline/ETLDruidContentIndexer</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/KnowledgePlatform/Yarn</td>
      <td style="text-align: left">release-4.5.0_RC11</td>
      <td style="text-align: left">Deploy/KnowledgePlatform/Yarn</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/KnowledgePlatform/Learning</td>
      <td style="text-align: left">release-4.5.0_RC11</td>
      <td style="text-align: left">Deploy/KnowledgePlatform/Learning</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Learner</td>
      <td style="text-align: left">release-4.5.0_RC10</td>
      <td style="text-align: left">Deploy/Kubernetes/Learner</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/managed-learn/ml-survey-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left">Deploy/managed-learn/ml-survey-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Lms</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left">Deploy/Kubernetes/Lms</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Kubernetes/Groups</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left">Deploy/Kubernetes/Groups</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">Build/Core/OfflineInstaller</td>
      <td style="text-align: left">release-4.5.0</td>
      <td style="text-align: left">Deploy/Core/OfflineInstaller</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/UCI</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/Transformer</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/Outbound</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/Orchestrator</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/odk</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/Inbound</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/gql</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/UCI/fusionauth</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/managed-learn/ml-analytics-service</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Report</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/OnboardConsumers</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/OnboardAPIs</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/nginx-private-ingress</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Logging</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/KnowledgeMW</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Keycloak</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/HawkeyeSuperset</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Enc</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Dial</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/CertRegistry</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Cert</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/BootstrapMinimal</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left">Run helm uninstall reloader first from every namespace</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/APIManager</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/Kubernetes/Analytics</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/KnowledgePlatform/Neo4jElasticSearchSyncTool</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/DataPipeline/CoreDataProducts</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Deploy/DataPipeline/AnalyticsCore</td>
      <td style="text-align: left">release-4.5.0_RC1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Log4jFix</td>
      <td style="text-align: left">Take job from here - https://github.com/project-sunbird/sunbird-devops/pull/3069/files<br />Or copy from dev OpsAdmin folder<br />Pass job option as below <br />hosts: env<br />release-4.5.0</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h3 id="manual-configurations-for-sunbird">Manual Configurations for Sunbird</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Manual Step</th>
      <th style="text-align: center">Instruction</th>
      <th style="text-align: center">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Install OPA</td>
      <td style="text-align: center">curl -k -L -o opa <br />https://openpolicyagent.org/downloads/v0.34.2/opa_linux_amd64_static<br />chmod 755 ./opa<br />sudo mv opa /usr/local/bin/</td>
      <td style="text-align: center">Installing Open Policy Agent</td>
    </tr>
    <tr>
      <td style="text-align: center">enable_tenant_config<br /><br />(update existing variable in core/common.yml, do not add new variable)</td>
      <td style="text-align: center">Environment Variable config for Group Service : <br />release-4.5.0_RC1</td>
      <td style="text-align: center">enable_tenant_config =tn<br /><br />Note : Any change in the configuration needs redeployment of the group service to reflect.</td>
    </tr>
    <tr>
      <td style="text-align: center">Add two job_ids in AnalyticsReplayJob jenkins job</td>
      <td style="text-align: center">Job_ids:<br />progress-exhaust-v2<br />response-exhaust-v2<br />score-metric-migration-job</td>
      <td style="text-align: center">PR: https://github.com/project-sunbird/sunbird-devops/pull/3028</td>
    </tr>
    <tr>
      <td style="text-align: center">Systemd Changes</td>
      <td style="text-align: center">We’ve to make manual changes, to avoid reprovisioning of services. Folllow the steps to make those changes. Follow these instructions for the services mentioned below<br /><br />- [ ] Systemctl: <br />      Follow the instructions for the services one node at a time<br />      - open service File (file path is mentioned as part of service details below) and add following line under <code>[Service]</code><br />        <code>bash        Environment=""_JAVA_OPTIONS='-Dlog4j2.formatMsgNoLookups=true'""       </code>      - After adding that line         <code>bash        sudo systemctl daemon-reload        sudo systemctl restart &lt;proper service name&gt;        sudo systemctl status &lt;proper service name&gt; # Should be greeen       </code>  - [ ] Elasticsearch (* noted because es service name changes as per the host name. Check the actual service name in the <code>/usr/lib/systemd/system</code> folder)<br />        Service Name: <em>elasticsearch.service <br />        File: /usr/lib/systemd/system/</em>elasticsearch.service<br />  - [ ] cassandra <br />        Service Name: cassandra.service<br />        File: /run/systemd/generator.late/cassandra.service<br />  - [ ] Keycloak <br />        Service Name: keycloak.service<br />        File: /run/systemd/generator.late/keycloak.service<br />  - [ ] graylog <br />        Service Name: graylog-server.service<br />        File: /usr/lib/systemd/system/graylog-server.service<br />  - [ ] redis <br />        Service Name: redis.service<br />        File: /etc/systemd/system/redis.service<br />  - [ ] mongo <br />        Service Name: mongod.service<br />        File: /lib/systemd/system/mongod.service<br />  - [ ] jenkins <br />        Service Name: jenkins.service<br />        file: /run/systemd/generator.late/jenkins.service</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">upgrade learning vm</td>
      <td style="text-align: center">https://docs.google.com/spreadsheets/d/1KnjAH_hMzFokmuUYN62HnevihJdXpnrfUgm_VgAH7AU/edit#gid=1317239687</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">upgrade keycloak vm</td>
      <td style="text-align: center">https://docs.google.com/spreadsheets/d/1KnjAH_hMzFokmuUYN62HnevihJdXpnrfUgm_VgAH7AU/edit#gid=726563363</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Update kubectl</td>
      <td style="text-align: center"># Install kubectl v1.22.0<br />curl -LO https://dl.k8s.io/release/v1.22.0/bin/linux/amd64/kubectlchmod +x kubectl<br />sudo mv kubectl /usr/local/bin</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"># Learning VM changes - To be done on Sunbird and VDN<br /># Run same steps in each node of Learning VM<br /><br />wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br />tar -xf openjdk-11+28_linux-x64_bin.tar.gz<br />sudo mv jdk-11 /opt<br />rm -rf openjdk-11+28_linux-x64_bin.tar.gz<br />/opt/jdk-11/bin/java -version<br /># The above command should show java version as 11<br /><br /><br /><br />sudo systemctl stop logstash.service<br />sudo su - learning<br />wget https://artifacts.elastic.co/downloads/logstash/logstash-6.8.21.tar.gz<br />tar -xf logstash-6.8.21.tar.gz<br />rm -rf logstash-6.8.21.tar.gz<br />cd /home/learning/logstash-6.3.1/<br />cp .sincedb_learning_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_language_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_config_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_search_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_learning_service_mw ../logstash-6.8.21/<br />cp .sincedb_learning_graph_event_mw ../logstash-6.8.21/<br />cp .sincedb_language_graph_event_mw ../logstash-6.8.21/<br />cp .sincedb_dial_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_dial_graph_event_mw ../logstash-6.8.21/<br />cd ..<br />mv logstash-6.3.1/ logstash-6.3.1_bak<br />ls -larth logstash-6.8.21<br /># The above command should show all the .sincedb files copied<br />exit<br /><br /><br /># Added / Update these under [Service] section. Comment out the exisiting Environment and ExecStart and use the below ones<br />sudo vi /etc/systemd/system/logstash.service<br />Environment=”JAVA_HOME=/opt/jdk-11”<br />ExecStart=/home/learning/logstash-6.8.21/bin/logstash -f /home/learning/logstash-6.8.21/logstash-lp.conf -w 1 –verbose<br />sudo systemctl daemon-reload<br /><br /># Redeploy learning service with new tag<br /># Verify logstash version is 6.8.21<br />ps -ef | grep logstash</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"># Neo4j VM changes - To be done on Sunbird and VDN<br /># Run same steps in each node of neo4j VM<br /><br />wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br />tar -xf openjdk-11+28_linux-x64_bin.tar.gz<br />sudo mv jdk-11 /opt<br />rm -rf openjdk-11+28_linux-x64_bin.tar.gz<br />/opt/jdk-11/bin/java -version<br /># The above command should show java version as 11<br /><br /><br /><br />sudo systemctl stop logstash.service<br />sudo su - learning<br />wget https://artifacts.elastic.co/downloads/logstash/logstash-6.8.21.tar.gz<br />tar -xf logstash-6.8.21.tar.gz<br />rm -rf logstash-6.8.21.tar.gz<br />cd /home/learning/logstash-6.3.1/<br />cp .sincedb_learning_graph_event_neo4j ../logstash-6.8.21/<br />cd ..<br />mv logstash-6.3.1/ logstash-6.3.1_bak<br />ls -larth logstash-6.8.21<br /># The above command should show all the .sincedb files copied<br />exit<br /><br /><br /># Added / Update these under [Service] section. Comment out the exisiting Environment and ExecStart and use the below ones<br />sudo vi /etc/systemd/system/logstash.service<br />Environment=”JAVA_HOME=/opt/jdk-11”<br />ExecStart=/home/learning/logstash-6.8.21/bin/logstash -f /home/learning/logstash-6.8.21/logstash-lp.conf -w 1 –verbose<br />sudo systemctl daemon-reload<br /><br /># Redeploy neo4j service with new tag<br /># Verify logstash version is 6.8.21<br />ps -ef | grep logstash</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<h5 id="note-the-below-jobs-are-applicable-only-if-you-are-running-vidyadaan-infrastructure">Note: The below jobs are applicable only if you are running Vidyadaan infrastructure</h5>

<h3 id="variables-for-vidyadaan">Variables for Vidyadaan</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Variable Name</th>
      <th style="text-align: center">Service Name</th>
      <th style="text-align: center">Default Public Value</th>
      <th style="text-align: center">Private Value Override</th>
      <th style="text-align: center">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">sunbird_google_oauth_client_email</td>
      <td style="text-align: center">Program</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Please set the google drive client email</td>
    </tr>
    <tr>
      <td style="text-align: center">sunbird_google_oauth_private_key</td>
      <td style="text-align: center">Program</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Please set the google drive private key</td>
    </tr>
    <tr>
      <td style="text-align: center">av_kafka_topic_create</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">FALSE</td>
      <td style="text-align: center">TRUE</td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<h3 id="build-and-deploy-for-vidayadaan">Build and Deploy for Vidayadaan</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Service to be Build</th>
      <th style="text-align: center">Build Tag</th>
      <th style="text-align: center">Service to Deploy</th>
      <th style="text-align: center">Deploy Tag</th>
      <th style="text-align: center">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Deploy/Core/KafkaSetup</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center">check below kafka topic created or not<br />{{env}}.av.question.bulkupload</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Upload Schema</td>
      <td style="text-align: center">release-4.5.0</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/APIManager</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Assessment</td>
      <td style="text-align: center">release-4.5.0_RC2</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Assessment</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Content</td>
      <td style="text-align: center">release-4.5.0_RC2</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Content</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Opensaber</td>
      <td style="text-align: center">vidyadaan</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Opensaber</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Player</td>
      <td style="text-align: center">release-4.5.0_RC9</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Player</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Program</td>
      <td style="text-align: center">release-4.5.0_RC1</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Program</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Search</td>
      <td style="text-align: center">release-4.5.0_RC2</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Search</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/Kubernetes/Taxonomy</td>
      <td style="text-align: center">release-4.5.0_RC2</td>
      <td style="text-align: center">Deploy/DockStaging/Kubernetes/Taxonomy</td>
      <td style="text-align: center">release-4.5.0-vdn</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/KnowledgePlatform/Learning</td>
      <td style="text-align: center">release-4.5.0_RC9</td>
      <td style="text-align: center">Deploy/DockStaging/KnowledgePlatform/Learning</td>
      <td style="text-align: center">release-4.5.0</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/KnowledgePlatform/Yarn</td>
      <td style="text-align: center">release-4.5.0_RC9</td>
      <td style="text-align: center">Deploy/DockStaging/KnowledgePlatform/Yarn</td>
      <td style="text-align: center">release-4.5.0</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/KnowledgePlatform/FlinkJobs</td>
      <td style="text-align: center">release-4.5.0_RC9</td>
      <td style="text-align: center">Deploy/DockStaging/KnowledgePlatform/FlinkJobs</td>
      <td style="text-align: center">release-4.5.0</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">DockBuild/DataPipeline/EdDataProducts</td>
      <td style="text-align: center">release-4.5.0_RC4</td>
      <td style="text-align: center">Deploy/DockStaging/DataPipeline/EdDataProducts</td>
      <td style="text-align: center">release-4.5.0</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">Log4jFix</td>
      <td style="text-align: center">Take job from here - https://github.com/project-sunbird/sunbird-devops/pull/3069/files<br />Or copy from dev OpsAdmin folder<br />Pass job option as below <br />hosts: env<br />release-4.5.0</td>
      <td style="text-align: center">Log4j Fix</td>
    </tr>
  </tbody>
</table>

<h3 id="manual-configurations-for-vidyadaan">Manual Configurations for Vidyadaan</h3>

<table>
  <thead>
    <tr>
      <th>Manual Step</th>
      <th>Instruction</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Systemd Changes</td>
      <td>“We’ve to make manual changes, to avoid reprovisioning of services. Folllow the steps to make those changes. Follow these instructions for the services mentioned below<br /><br />- [ ] Systemctl: <br />      Follow the instructions for the services one node at a time<br />      - open service File (file path is mentioned as part of service details below) and add following line under <code>[Service]</code><br />        <code>bash&lt;br&gt;        Environment=""""_JAVA_OPTIONS='-Dlog4j2.formatMsgNoLookups=true'""""&lt;br&gt;       </code><br />      - After adding that line <br />        <code>bash&lt;br&gt;        sudo systemctl daemon-reload&lt;br&gt;        sudo systemctl restart &lt;proper service name&gt;&lt;br&gt;        sudo systemctl status &lt;proper service name&gt; # Should be greeen&lt;br&gt;       </code><br />  - [ ] Elasticsearch (* noted because es service name changes as per the host name. Check the actual service name in the <code>/usr/lib/systemd/system</code> folder)<br />        Service Name: <em>elasticsearch.service <br />        File: /usr/lib/systemd/system/</em>elasticsearch.service<br />  - [ ] cassandra <br />        Service Name: cassandra.service<br />        File: /run/systemd/generator.late/cassandra.service<br />  - [ ] Keycloak <br />        Service Name: keycloak.service<br />        File: /run/systemd/generator.late/keycloak.service<br />  - [ ] graylog <br />        Service Name: graylog-server.service<br />        File: /usr/lib/systemd/system/graylog-server.service<br />  - [ ] redis <br />        Service Name: redis.service<br />        File: /etc/systemd/system/redis.service<br />  - [ ] mongo <br />        Service Name: mongod.service<br />        File: /lib/systemd/system/mongod.service<br />  - [ ] jenkins <br />        Service Name: jenkins.service<br />        file: /run/systemd/generator.late/jenkins.service”</td>
      <td> </td>
    </tr>
    <tr>
      <td>”# Learning VM changes - To be done on Sunbird and VDN<br /># Run same steps in each node of Learning VM<br /><br />wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br />tar -xf openjdk-11+28_linux-x64_bin.tar.gz<br />sudo mv jdk-11 /opt<br />rm -rf openjdk-11+28_linux-x64_bin.tar.gz<br />/opt/jdk-11/bin/java -version<br /># The above command should show java version as 11<br /><br /><br /><br />sudo systemctl stop logstash.service<br />sudo su - learning<br />wget https://artifacts.elastic.co/downloads/logstash/logstash-6.8.21.tar.gz<br />tar -xf logstash-6.8.21.tar.gz<br />rm -rf logstash-6.8.21.tar.gz<br />cd /home/learning/logstash-6.3.1/<br />cp .sincedb_learning_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_language_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_config_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_search_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_learning_service_mw ../logstash-6.8.21/<br />cp .sincedb_learning_graph_event_mw ../logstash-6.8.21/<br />cp .sincedb_language_graph_event_mw ../logstash-6.8.21/<br />cp .sincedb_dial_telemetry_event_mw ../logstash-6.8.21/<br />cp .sincedb_dial_graph_event_mw ../logstash-6.8.21/<br />cd ..<br />mv logstash-6.3.1/ logstash-6.3.1_bak<br />ls -larth logstash-6.8.21<br /># The above command should show all the .sincedb files copied<br />exit<br /><br /><br /># Added / Update these under [Service] section. Comment out the exisiting Environment and ExecStart and use the below ones<br />sudo vi /etc/systemd/system/logstash.service<br />Environment=”“JAVA_HOME=/opt/jdk-11”“<br />ExecStart=/home/learning/logstash-6.8.21/bin/logstash -f /home/learning/logstash-6.8.21/logstash-lp.conf -w 1 –verbose<br />sudo systemctl daemon-reload<br /><br /># Redeploy learning service with new tag<br /># Verify logstash version is 6.8.21<br />ps -ef | grep logstash”</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>”# Neo4j VM changes - To be done on Sunbird and VDN<br /># Run same steps in each node of neo4j VM<br /><br />wget https://download.java.net/openjdk/jdk11/ri/openjdk-11+28_linux-x64_bin.tar.gz<br />tar -xf openjdk-11+28_linux-x64_bin.tar.gz<br />sudo mv jdk-11 /opt<br />rm -rf openjdk-11+28_linux-x64_bin.tar.gz<br />/opt/jdk-11/bin/java -version<br /># The above command should show java version as 11<br /><br /><br /><br />sudo systemctl stop logstash.service<br />sudo su - learning<br />wget https://artifacts.elastic.co/downloads/logstash/logstash-6.8.21.tar.gz<br />tar -xf logstash-6.8.21.tar.gz<br />rm -rf logstash-6.8.21.tar.gz<br />cd /home/learning/logstash-6.3.1/<br />cp .sincedb_learning_graph_event_neo4j ../logstash-6.8.21/<br />cd ..<br />mv logstash-6.3.1/ logstash-6.3.1_bak<br />ls -larth logstash-6.8.21<br /># The above command should show all the .sincedb files copied<br />exit<br /><br /><br /># Added / Update these under [Service] section. Comment out the exisiting Environment and ExecStart and use the below ones<br />sudo vi /etc/systemd/system/logstash.service<br />Environment=”“JAVA_HOME=/opt/jdk-11”“<br />ExecStart=/home/learning/logstash-6.8.21/bin/logstash -f /home/learning/logstash-6.8.21/logstash-lp.conf -w 1 –verbose<br />sudo systemctl daemon-reload<br /><br /># Redeploy neo4j service with new tag<br /># Verify logstash version is 6.8.21<br />ps -ef | grep logstash<br />”</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Upgrade Elastic Search</td>
      <td>Steps:<br /><br />First:<br />Take backup of comp-es <br /><br />Second:<br />Stop elastic search process on all the comp-es nodes<br />Take disk snapshot<br /><br />Third:<br />Update elastic search version <br />- $sudo su <br />- $export ES_PATH_CONF=/etc/elasticsearch<br />- $apt update<br />- $apt-cache madison elastic search # make sure the latest version is 6.8.21<br />- $apt install elasticsearch ( it’ll ask whether to override the configs, keep the old one. press <code>O</code> )<br />Update repository azure plugin for ES 6.8.21<br />- cd /usr/share/elasticsearch/bin<br />- ./elasticsearch-plugin remove repository-azure<br />- ./elasticsearch-plugin install repository-azure<br /><br />Fourth:<br />Start elastic search process on each node after new version is installed on all the nodes</td>
      <td> </td>
    </tr>
  </tbody>
</table>


          
          <hr />
          
          <p class="edit-para text-right">
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/edit/4.5.0/developer-docs/upgrade/index.md" title="Fix this page">
				<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</a> |
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				<i class="fa fa-exclamation-circle" aria-hidden="true"></i> Report</a>
		  </p>
		  <a href="developer-docs/upgrade/#heading" class="scrollup"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></a>
          
      </div>
    </div>
    <div class="page-footer">
		<footer class="footer">
	<div class="footer__top">
		<div class="container">
			<div class="row">
				
			<div class="col-md-4 col-sm-12">
			</div>
			
			<div class="col-md-2 col-sm-6 ">
				<ul>
					<li><a href="http://www.sunbird.org/about/" target="_blank">About Sunbird</a></li>
					<li><a href="http://www.sunbird.org/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div>
			
			<div class="col-md-2 col-sm-6 sideline">
				<ul>
					<li><a href="http://www.sunbird.org/privacy-policy/" target="_blank">Privacy Policy</a></li>
					<li><a href="http://www.sunbird.org/features/" target="_blank">Microservices</a></li>
				</ul>
			</div>

			<div class="col-md-2 col-sm-12">
			</div>
			
		</div>
	</div>
</footer>
 

	</div>
  </div>
  <script type="text/javascript">
	//TOC Toggle
    $(function() {
        $.toc.clickHideButton();
    });
    //Scroll to top
    $(document).ready(function () {
		$(".content").scroll(function () {
			if ($(this).scrollTop() > 250) {
				$('.scrollup').fadeIn();
			} else {
				$('.scrollup').fadeOut();
			}
		});
	});
	$('#toc a').each(function(){
		var url = this.href.replace(baseURL.href, "");
		this.href = 'developer-docs/upgrade/' + url;
    })
	$(".zoomcover").click(function(){
		if (!$(this).hasClass("fullscreen")){
			$(this).addClass("fullscreen");
			$(this).find(".zoom").addClass("enabled").elevateZoom({
				zoomType: "inner",
				cursor  : "crosshair",
				scrollZoom: "true"
			});
		} else {
			$(this).removeClass("fullscreen");
			$(this).find(".zoom").removeClass("enabled");
			$(".zoomContainer").hide();
		}
	});
	$(document).keyup(function(e) {
     if (e.keyCode == 27) { 
		$(".zoomcover").removeClass("fullscreen");
		$(".zoomcover").find(".zoom").removeClass("enabled");
		$(".zoomContainer").hide();
    }
});
  </script>
  <style>
  .zoom:hover{
	cursor:url(/img/zoom.png),crosshair;
  }
  .zoomWindowContainer:hover div{
	cursor:url(/img/scroll.png),crosshair !important;
	height:15px;
	width:15px;
  }
  </style>
  <div id="templates"></div>
  </body>
</html>
